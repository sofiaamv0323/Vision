var TcHmi;!function(o){let e;!function(e){let n;!function(e){let n;!function(e){const n=o.Controls.Beckhoff.Vision.Color,r=o.Controls.Beckhoff.Vision.Color.Space,t=o.Controls.Beckhoff.Vision.Color.ElementType,l=o.Controls.Beckhoff.Vision.Color.Precision,c=o.Controls.Beckhoff.Vision.Color.ColorConversionCode;e.ConvertColor=async function(e,s,i,u,a=l.TWO,f=t.USINT,C=t.USINT){const L=n.GetPixelTypeBasedScalings(f)[0];C=null==C?f:C;const h=n.GetPixelTypeBasedScalings(C)[1],B=C===t.UINT?65535:255,V=o=>L(o)/255,S=o=>h(255*o),F=o=>{const e=h(255*o);return e<B?e:B},H=o=>L(o)/255*360,R=o=>h(o/360*255),G=o=>2*L(o),U=o=>h(o/2),g=o=>L(o)/2.55,A=o=>h(2.55*o),T=o=>L(o)-128,_=o=>h(o+128),k=o=>L(o),O=o=>h(o),d=o=>{switch(o){case r.GRAY:return[[V],[S]];case r.RGB:case r.YUV:case r.YCrCb:return[[V,V,V],[S,S,F]];case r.HSV_FULL:case r.HLS_FULL:return[[H,V,V],[R,S,S]];case r.RGBA:return[[V,V,V,V],[S,S,S,S]];case r.HSV:case r.HLS:return[[G,V,V],[U,S,S]];case r.Lab:return[[g,T,T],[A,_,_]];default:return[[k,k,k],[O,O,O]]}},m=(o,e)=>{if(Array.isArray(o))return 1==e.length?e[0](o[0]):4==e.length?[e[0](o[0]),e[1](o[1]),e[2](o[2]),e[3](3==o.length?255:o[3])]:[e[0](o[0]),e[1](o[1]),e[2](o[2])];{let n=e[0](o);return 1==e.length?n:4==e.length?[n,0,0,0]:[n,0,0]}},v=d(i)[0],y=d(u)[1],p=m(s,v);let Y=null;if(i==r.GRAY||Array.isArray(p)){const e=o=>o==r.HLS_FULL?r.HLS:o==r.HSV_FULL?r.HSV:o,t=o=>{switch(o){case r.GRAY:return"GRAY";case r.RGBA:return"RGBA";case r.HSV_FULL:return"HSV_FULL";case r.HLS_FULL:return"HLS_FULL";default:return o.toString()}};let l=null,s=null;if((u=e(u))!=(i=e(i))&&(u==r.RGB||i==r.RGB?l=c["COLOR_"+t(i)+"2"+t(u)]:(l=c["COLOR_"+t(i)+"2RGB"],s=c["COLOR_RGB2"+t(u)])),null==l&&null==s)Y=p;else if(null!=l&&null==s)Y=await n.convertColorOpenCV(p,l);else if(null!=l&&null!=s){let o=await n.convertColorOpenCV(p,l);Y=await n.convertColorOpenCV(o,s)}else o.Functions.Beckhoff.Log("Error","SrcFormat or DestFormat or both are invalid."),Y=null}else o.Functions.Beckhoff.Log("Error","Color does not match the selected color format"),Y=null;return null!=Y&&(Y=m(Y,y)),Y&&(Y=n.roundColorValue(Y,a)),e?.success(Y),Y}}(n=e.Vision||(e.Vision={}))}(n=e.Beckhoff||(e.Beckhoff={})),e.registerFunctionEx("ConvertColor","TcHmi.Functions.Beckhoff.Vision",n.Vision.ConvertColor)}(e=o.Functions||(o.Functions={}))}(TcHmi||(TcHmi={}));